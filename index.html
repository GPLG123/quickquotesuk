<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Quick Quotes UK - Client Map</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>

    <style>
        body { margin:0; padding:0; }
        #map { height: 100vh; }
    </style>
</head>
<body>

<div id="map"></div>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>

// Initializare hartă centrată pe UK
var map = L.map('map').setView([54.5, -3], 6);

// Tile layer OpenStreetMap
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors'
}).addTo(map);


// Lista clienti
var clients = [
    {name: "ShipBob", postcode: "CV35 9JY"},
    {name: "ShipBob", postcode: "OL10 2TT"},
    {name: "AJVANI SHOES", postcode: "BL1 3DX"},
    {name: "Belushi Ltd t/a Chalkys.comon", postcode: "OX16 3LU"},
    {name: "Buscalibre", postcode: "RG24 8LJ"},
    {name: "CPL Solutions Ltd", postcode: "BL1 2SE"},
    {name: "DECIEM", postcode: "NG2 1AH"},
    {name: "EDWARD BOWDITCH LTD", postcode: "TW4 6ER"},
    {name: "eSalon", postcode: "W3 6UU"},
    {name: "Exelot", postcode: "SL3 0BQ"},
    {name: "FANATICS", postcode: "M24 2FL"},
    {name: "Fishpond World Ltd", postcode: "GL3 4BH"},
    {name: "FUNKO", postcode: "CV3 4PB"},
    {name: "GAMES QUEST", postcode: "GU35 9HH"},
    {name: "Love Honey", postcode: "BA1 3EN"},
    {name: "Maniere de Voir Ltd", postcode: "WA3 6DF"},
    {name: "Motel Rocks", postcode: "WR4 9FA"},
    {name: "Pointbid", postcode: "B6 7JJ"},
    {name: "Snag Tights", postcode: "EH54 9DF"},
    {name: "T Shirt & Sons", postcode: "BA13 4JP"},
    {name: "UNIVERSAL TEXTILES", postcode: "LE3 1HR"},
    {name: "Wrap Distribution", postcode: "OX10 9TA"}
];


// Functie pentru geocodare postcode
function geocodeClient(client) {
    var url = "https://nominatim.openstreetmap.org/search?format=json&country=UK&postalcode=" 
              + client.postcode;

    fetch(url)
        .then(response => response.json())
        .then(data => {
            if (data.length > 0) {
                var lat = data[0].lat;
                var lon = data[0].lon;

                L.circleMarker([lat, lon], {
                    radius: 6,
                    fillColor: "#007bff",
                    color: "#fff",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 0.8
                })
                .addTo(map)
                .bindPopup("<b>" + client.name + "</b><br>" + client.postcode);
            }
        })
        .catch(err => console.log(err));
}


// Adaugă toți clienții pe hartă
clients.forEach(client => {
    geocodeClient(client);
});

</script>

</body>
</html>
